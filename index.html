<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EcoRetrofit24 Professional • Energy Management Platform</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body { 
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      background: linear-gradient(135deg, #fafbfc 0%, #f4f6f8 50%, #e8eef2 100%);
      color: #0f172a;
      line-height: 1.65;
      font-size: 14px;
      -webkit-font-smoothing: antialiased;
    }
    
    .container {
      min-height: 100vh;
    }

    /* Header Styles */
    .header {
      background: linear-gradient(135deg, #1a365d 0%, #2c5282 100%);
      color: white;
      padding: 0;
      box-shadow: 0 4px 20px rgba(26, 54, 93, 0.15);
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 40px;
      max-width: 1400px;
      margin: 0 auto;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .logo-icon {
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }

    .logo-text h1 {
      font-family: 'Playfair Display', serif;
      font-size: 28px;
      font-weight: 700;
      margin: 0;
      letter-spacing: -0.5px;
    }

    .logo-text p {
      font-size: 12px;
      opacity: 0.8;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin: 0;
    }

    .nav {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 20px;
      cursor: pointer;
      transition: all 0.2s ease;
      border-radius: 8px;
      font-weight: 500;
      font-size: 14px;
      white-space: nowrap;
    }

    .nav-item:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .nav-item.active {
      background: rgba(255, 255, 255, 0.15);
      font-weight: 600;
    }

    .nav-icon {
      font-size: 16px;
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .user-profile {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 8px 16px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .user-profile:hover {
      background: rgba(255, 255, 255, 0.15);
    }

    .user-avatar {
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 600;
    }

    .user-info {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }

    .user-name {
      font-size: 13px;
      font-weight: 600;
      line-height: 1;
    }

    .user-role {
      font-size: 11px;
      opacity: 0.8;
      line-height: 1;
    }

    .main-content {
      margin-top: 80px;
      padding: 40px;
      max-width: 1400px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Mobile Navigation */
    .mobile-nav-toggle {
      display: none;
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      padding: 8px;
    }

    .mobile-nav {
      display: none;
      position: fixed;
      top: 80px;
      left: 0;
      right: 0;
      background: linear-gradient(135deg, #1a365d 0%, #2c5282 100%);
      box-shadow: 0 4px 20px rgba(26, 54, 93, 0.15);
      z-index: 999;
      padding: 20px;
    }

    .mobile-nav.active {
      display: block;
    }

    .mobile-nav .nav-item {
      width: 100%;
      justify-content: flex-start;
      margin-bottom: 8px;
      padding: 16px 20px;
    }

    .section {
      display: none;
      animation: fadeIn 0.3s ease-in-out;
    }

    .section.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .section-header {
      margin-bottom: 32px;
      text-align: center;
    }

    .section-header h2 {
      font-size: 32px;
      font-weight: 700;
      color: #1a202c;
      margin-bottom: 8px;
    }

    .section-header p {
      font-size: 16px;
      color: #718096;
      max-width: 600px;
      margin: 0 auto;
    }

    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      margin-bottom: 40px;
    }

    .card {
      background: white;
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 8px 32px rgba(15, 23, 42, 0.08);
      border: 1px solid #e1e7ef;
      transition: all 0.2s ease;
    }

    .card:hover {
      box-shadow: 0 12px 40px rgba(15, 23, 42, 0.12);
      transform: translateY(-2px);
    }

    .card-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .card-icon {
      font-size: 24px;
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #e0f2fe 0%, #b3e5fc 100%);
      border-radius: 12px;
    }

    .card-title {
      font-size: 18px;
      font-weight: 600;
      color: #1a202c;
    }

    .card-value {
      font-size: 32px;
      font-weight: 800;
      color: #1a365d;
      margin-bottom: 8px;
    }

    .card-subtitle {
      font-size: 14px;
      color: #718096;
    }

    .projects-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 24px;
    }

    .project-card {
      background: white;
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 8px 32px rgba(15, 23, 42, 0.08);
      border: 1px solid #e1e7ef;
    }

    .project-header {
      display: flex;
      justify-content: between;
      align-items: flex-start;
      margin-bottom: 16px;
    }

    .project-title {
      font-size: 18px;
      font-weight: 600;
      color: #1a202c;
      margin-bottom: 4px;
    }

    .project-location {
      font-size: 14px;
      color: #718096;
    }

    .project-status {
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .status-active {
      background: #dcfce7;
      color: #166534;
    }

    .status-planning {
      background: #fef3c7;
      color: #92400e;
    }

    .status-completed {
      background: #dbeafe;
      color: #1e40af;
    }

    .project-metrics {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      margin-top: 16px;
    }

    .metric {
      text-align: center;
    }

    .metric-value {
      display: block;
      font-size: 20px;
      font-weight: 700;
      color: #1a365d;
    }

    .metric-label {
      font-size: 12px;
      color: #718096;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .audit-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
    }

    .audit-card {
      background: white;
      border-radius: 16px;
      padding: 32px;
      box-shadow: 0 8px 32px rgba(15, 23, 42, 0.08);
      border: 1px solid #e1e7ef;
      text-align: center;
    }

    .audit-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }

    .audit-card h3 {
      font-size: 20px;
      font-weight: 600;
      color: #1a202c;
      margin-bottom: 8px;
    }

    .audit-card p {
      color: #718096;
      margin-bottom: 20px;
    }

    .audit-metrics {
      display: flex;
      justify-content: space-around;
      gap: 16px;
    }

    /* APVA Generator Styles */
    .apva-container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .apva-header {
      text-align: center;
      margin-bottom: 40px;
      padding: 40px;
      background: #0f172a;
      color: white;
      border-radius: 12px;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }

    .apva-header h1 {
      font-family: 'Playfair Display', serif;
      font-size: 36px;
      font-weight: 700;
      margin-bottom: 8px;
      letter-spacing: -0.5px;
    }

    .apva-header p {
      font-size: 16px;
      opacity: 0.9;
      margin-bottom: 16px;
    }

    .stats {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 24px;
    }

    .stat {
      text-align: center;
    }

    .stat-value {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .stat-label {
      font-size: 12px;
      opacity: 0.8;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .form-container {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 32px;
      margin-bottom: 40px;
    }

    .form-section {
      margin-bottom: 32px;
    }

    .form-section-title {
      font-size: 16px;
      font-weight: 600;
      color: #1a202c;
      margin-bottom: 16px;
      padding-bottom: 8px;
      border-bottom: 2px solid #e2e8f0;
    }

    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    .label {
      display: block;
      font-size: 13px;
      font-weight: 500;
      color: #2d3748;
      margin-bottom: 6px;
    }

    .input {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      font-size: 14px;
      transition: all 0.2s ease;
      font-family: inherit;
      background: white;
    }

    .input:focus {
      outline: none;
      border-color: #1a365d;
      box-shadow: 0 0 0 3px rgba(26, 54, 93, 0.1);
    }

    .textarea {
      min-height: 100px;
      resize: vertical;
    }

    .select {
      appearance: none;
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
      background-position: right 12px center;
      background-repeat: no-repeat;
      background-size: 16px;
      padding-right: 40px;
    }

    .checkbox-group {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 8px;
    }

    .checkbox-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px;
      border: 1px solid #e2e8f0;
      border-radius: 6px;
      transition: all 0.2s ease;
    }

    .checkbox-item:hover {
      background: #f8fafc;
      border-color: #cbd5e0;
    }

    .checkbox-item input[type="checkbox"] {
      width: 16px;
      height: 16px;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 16px 24px;
      border-radius: 8px;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s ease;
      border: none;
      text-decoration: none;
      line-height: 1;
      width: 100%;
    }

    .btn-primary {
      background: linear-gradient(135deg, #1a365d 0%, #2c5282 100%);
      color: white;
      box-shadow: 0 8px 24px rgba(26, 54, 93, 0.3);
    }

    .btn-primary:hover {
      background: linear-gradient(135deg, #2c5282 0%, #3182ce 100%);
      box-shadow: 0 12px 32px rgba(26, 54, 93, 0.4);
      transform: translateY(-2px);
    }

    .info-item {
      display: flex;
      gap: 12px;
      padding: 16px;
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      margin-bottom: 12px;
    }

    .info-icon {
      font-size: 20px;
      flex-shrink: 0;
    }

    .info-content h4 {
      font-weight: 600;
      font-size: 14px;
      margin-bottom: 4px;
      color: #1a202c;
    }

    .info-content p {
      font-size: 13px;
      color: #718096;
      line-height: 1.4;
    }

    .success-banner {
      background: linear-gradient(135deg, #f0fff4 0%, #dcfce7 100%);
      border: 2px solid #22c55e;
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      margin-top: 24px;
    }

    .success-banner h3 {
      color: #166534;
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .success-banner p {
      color: #065f46;
      font-size: 14px;
    }

    @media (max-width: 1024px) {
      .nav {
        display: none;
      }
      
      .mobile-nav-toggle {
        display: block;
      }
      
      .header-content {
        padding: 16px 20px;
      }
      
      .main-content {
        padding: 20px;
      }
    }

    @media (max-width: 768px) {
      .header-content {
        flex-wrap: wrap;
      }
      
      .logo-text h1 {
        font-size: 24px;
      }
      
      .user-info {
        display: none;
      }
      
      .main-content {
        margin-top: 70px;
        padding: 16px;
      }
      
      .form-container {
        grid-template-columns: 1fr;
      }
      
      .form-grid {
        grid-template-columns: 1fr;
      }
      
      .checkbox-group {
        grid-template-columns: 1fr;
      }
      
      .stats {
        flex-direction: column;
        gap: 20px;
      }
      
      .dashboard-grid {
        grid-template-columns: 1fr;
      }
      
      .projects-grid {
        grid-template-columns: 1fr;
      }
      
      .audit-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 480px) {
      .logo-icon {
        width: 40px;
        height: 40px;
        font-size: 20px;
      }
      
      .logo-text h1 {
        font-size: 20px;
      }
      
      .section-header h2 {
        font-size: 24px;
      }
      
      .apva-header h1 {
        font-size: 28px;
      }
      
      .stats {
        gap: 16px;
      }
      
      .stat-value {
        font-size: 20px;
      }
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;

    function APVAGenerator() {
      const [formData, setFormData] = useState({
        // Company Information
        companyName: '',
        taxReference: '',
        contactPerson: '',
        email: '',
        phone: '',
        address: '',
        
        // Building Information
        buildingType: '',
        floorArea: '',
        yearBuilt: '',
        floors: '',
        berRating: '',
        
        // Energy Data
        annualKwh: '',
        heatingType: '',
        currentEnergyCost: '',
        
        // Energy Efficiency Measures
        measures: {
          solar: false,
          heatPump: false,
          insulation: false,
          windows: false,
          led: false,
          smartControls: false
        },
        
        // Project Details
        projectNotes: ''
      });

      const [isGenerating, setIsGenerating] = useState(false);
      const [showSuccess, setShowSuccess] = useState(false);

      const handleInputChange = (field, value) => {
        setFormData(prev => ({
          ...prev,
          [field]: value
        }));
      };

      const handleMeasureChange = (measure, checked) => {
        setFormData(prev => ({
          ...prev,
          measures: {
            ...prev.measures,
            [measure]: checked
          }
        }));
      };

      const generateProfessionalAPVA = async () => {
        setIsGenerating(true);
        
        try {
          const { jsPDF } = window.jspdf;
          const doc = new jsPDF();
          
          // Use form data or professional defaults
          const data = {
            companyName: formData.companyName || 'Professional Business Ltd',
            taxReference: formData.taxReference || '[Tax Reference Required]',
            contactPerson: formData.contactPerson || '[Contact Person Required]',
            email: formData.email || '[Email Required]',
            phone: formData.phone || '[Phone Required]',
            address: formData.address || '[Business Address Required]',
            buildingType: formData.buildingType || 'Commercial Office Building',
            floorArea: parseFloat(formData.floorArea) || 300,
            yearBuilt: parseInt(formData.yearBuilt) || 2010,
            floors: formData.floors || '3',
            berRating: formData.berRating || 'C2',
            annualKwh: parseFloat(formData.annualKwh) || 25000,
            heatingType: formData.heatingType || 'Natural Gas',
            currentEnergyCost: parseFloat(formData.currentEnergyCost) || 8000,
            projectNotes: formData.projectNotes || 'Professional energy retrofit assessment completed by EcoRetrofit24. Building evaluated for optimal energy efficiency improvements under APVA scheme.'
          };

          // Professional calculations
          const buildingAge = new Date().getFullYear() - data.yearBuilt;
          const energyIntensity = Math.round(data.annualKwh / data.floorArea);
          
          // Equipment sizing (professional standards)
          const solarSize = Math.max(8, Math.round(data.floorArea / 50));
          const heatPumpSize = Math.round(data.floorArea / 15);
          const insulationArea = Math.round(data.floorArea * 1.3);
          
          // Professional cost estimates
          const costs = {
            solar: solarSize * 1500,
            heatPump: heatPumpSize * 900,
            insulation: insulationArea * 40,
            windows: Math.round(data.floorArea * 200),
            led: Math.round(data.floorArea * 18),
            smartControls: 3500,
            installation: 0
          };
          
          costs.installation = Math.round((costs.solar + costs.heatPump + costs.insulation) * 0.15);
          const totalCost = Object.values(costs).reduce((sum, cost) => sum + cost, 0);
          const grantAmount = Math.round(totalCost * 0.7);
          const clientContribution = totalCost - grantAmount;
          
          // Energy savings calculations
          const expectedSavings = Math.min(60, 30 + Math.round(data.floorArea / 200));
          const annualSavings = Math.round(data.currentEnergyCost * (expectedSavings / 100));
          const paybackPeriod = Math.round(clientContribution / annualSavings);
          const co2Reduction = Math.round(data.annualKwh * (expectedSavings / 100) * 0.233);
          
          const appRef = `APVA-${data.companyName.replace(/[^A-Z0-9]/gi, '').substring(0,4).toUpperCase()}-${Date.now().toString().slice(-6)}`;

          // === PAGE 1: HEADER & COMPANY INFO ===
          // Professional header with branding
          doc.setFillColor(26, 54, 93);
          doc.rect(0, 0, 210, 40, 'F');
          
          doc.setTextColor(255, 255, 255);
          doc.setFontSize(22);
          doc.setFont(undefined, 'bold');
          doc.text("APVA GRANT APPLICATION", 105, 18, { align: 'center' });
          
          doc.setFontSize(12);
          doc.setFont(undefined, 'normal');
          doc.text("Accelerated Capital Allowance for Energy Efficient Equipment", 105, 26, { align: 'center' });
          
          doc.setFontSize(10);
          doc.text("Revenue Commissioners Approved • Finance Act 2008-2023 Compliant", 105, 33, { align: 'center' });
          
          // Application details
          doc.setTextColor(0, 0, 0);
          doc.setFontSize(10);
          doc.text("EcoRetrofit24 Professional Portal", 14, 50);
          doc.text(`Application Date: ${new Date().toLocaleDateString('en-IE', { day: 'numeric', month: 'long', year: 'numeric' })}`, 14, 56);
          doc.text(`Reference: ${appRef}`, 14, 62);
          
          // Company Information Section
          doc.setFontSize(16);
          doc.setFont(undefined, 'bold');
          doc.text("1. APPLICANT INFORMATION", 14, 80);
          
          doc.setFontSize(11);
          doc.setFont(undefined, 'normal');
          let yPos = 92;
          
          doc.text(`Company Name: ${data.companyName}`, 20, yPos);
          yPos += 8;
          doc.text(`Tax Reference Number: ${data.taxReference}`, 20, yPos);
          yPos += 8;
          doc.text(`Business Address: ${data.address}`, 20, yPos);
          yPos += 8;
          doc.text(`Contact Person: ${data.contactPerson}`, 20, yPos);
          yPos += 8;
          doc.text(`Email: ${data.email}`, 20, yPos);
          yPos += 8;
          doc.text(`Phone: ${data.phone}`, 20, yPos);
          yPos += 15;
          
          // Building Information
          doc.setFontSize(16);
          doc.setFont(undefined, 'bold');
          doc.text("2. BUILDING INFORMATION", 14, yPos);
          yPos += 15;
          
          doc.setFontSize(11);
          doc.setFont(undefined, 'normal');
          doc.text(`Building Type: ${data.buildingType}`, 20, yPos);
          yPos += 8;
          doc.text(`Total Floor Area: ${data.floorArea.toLocaleString()} m²`, 20, yPos);
          yPos += 8;
          doc.text(`Year of Construction: ${data.yearBuilt}`, 20, yPos);
          yPos += 8;
          doc.text(`Number of Floors: ${data.floors}`, 20, yPos);
          yPos += 8;
          doc.text(`Current BER Rating: ${data.berRating}`, 20, yPos);
          yPos += 8;
          doc.text(`Building Age: ${buildingAge} years`, 20, yPos);
          yPos += 8;
          doc.text(`Primary Heating System: ${data.heatingType}`, 20, yPos);
          yPos += 8;
          doc.text(`Annual Energy Consumption: ${data.annualKwh.toLocaleString()} kWh`, 20, yPos);
          yPos += 8;
          doc.text(`Energy Intensity: ${energyIntensity} kWh/m²/year`, 20, yPos);
          yPos += 8;
          doc.text(`Current Annual Energy Cost: €${data.currentEnergyCost.toLocaleString()}`, 20, yPos);

          // === PAGE 2: PROPOSED MEASURES ===
          doc.addPage();
          
          doc.setFontSize(16);
          doc.setFont(undefined, 'bold');
          doc.text("3. PROPOSED ENERGY EFFICIENCY MEASURES", 14, 20);
          
          yPos = 35;
          doc.setFontSize(11);
          doc.setFont(undefined, 'normal');
          
          // Solar PV System
          doc.setFont(undefined, 'bold');
          doc.text("3.1 Solar Photovoltaic System", 20, yPos);
          yPos += 8;
          doc.setFont(undefined, 'normal');
          doc.text(`• System Capacity: ${solarSize} kW`, 25, yPos);
          yPos += 6;
          doc.text(`• Expected Annual Generation: ${Math.round(solarSize * 1200).toLocaleString()} kWh`, 25, yPos);
          yPos += 6;
          doc.text(`• Technology: Tier 1 monocrystalline panels with string inverters`, 25, yPos);
          yPos += 6;
          doc.text(`• Estimated Cost: €${costs.solar.toLocaleString()}`, 25, yPos);
          yPos += 6;
          doc.text(`• Annual CO₂ Savings: ${Math.round(solarSize * 1200 * 0.233).toLocaleString()} kg`, 25, yPos);
          yPos += 12;
          
          // Heat Pump System
          doc.setFont(undefined, 'bold');
          doc.text("3.2 Air-to-Water Heat Pump System", 20, yPos);
          yPos += 8;
          doc.setFont(undefined, 'normal');
          doc.text(`• Heat Pump Capacity: ${heatPumpSize} kW`, 25, yPos);
          yPos += 6;
          doc.text(`• Technology: A+++ rated air-to-water heat pump`, 25, yPos);
          yPos += 6;
          doc.text(`• Seasonal Performance Factor (SPF): 4.2`, 25, yPos);
          yPos += 6;
          doc.text(`• Estimated Cost: €${costs.heatPump.toLocaleString()}`, 25, yPos);
          yPos += 6;
          doc.text(`• Expected Efficiency Improvement: 300%+ vs conventional heating`, 25, yPos);
          yPos += 12;
          
          // Building Fabric Improvements
          doc.setFont(undefined, 'bold');
          doc.text("3.3 Building Fabric Improvements", 20, yPos);
          yPos += 8;
          doc.setFont(undefined, 'normal');
          doc.text(`• Wall Insulation: ${Math.round(insulationArea * 0.6)} m² external/internal insulation`, 25, yPos);
          yPos += 6;
          doc.text(`• Roof Insulation: ${Math.round(insulationArea * 0.4)} m² high-performance insulation`, 25, yPos);
          yPos += 6;
          doc.text(`• Thermal Bridging Reduction: Continuous insulation layer`, 25, yPos);
          yPos += 6;
          doc.text(`• Estimated Cost: €${costs.insulation.toLocaleString()}`, 25, yPos);
          yPos += 12;
          
          // High-Performance Windows
          doc.setFont(undefined, 'bold');
          doc.text("3.4 High-Performance Windows & Doors", 20, yPos);
          yPos += 8;
          doc.setFont(undefined, 'normal');
          doc.text(`• Triple-glazed windows with low-E coating`, 25, yPos);
          yPos += 6;
          doc.text(`• U-value: ≤ 1.0 W/m²K`, 25, yPos);
          yPos += 6;
          doc.text(`• Argon gas filled for enhanced thermal performance`, 25, yPos);
          yPos += 6;
          doc.text(`• Estimated Cost: €${costs.windows.toLocaleString()}`, 25, yPos);
          yPos += 12;
          
          // LED Lighting
          doc.setFont(undefined, 'bold');
          doc.text("3.5 LED Lighting System", 20, yPos);
          yPos += 8;
          doc.setFont(undefined, 'normal');
          doc.text(`• Complete LED retrofit with smart controls`, 25, yPos);
          yPos += 6;
          doc.text(`• Daylight and occupancy sensors`, 25, yPos);
          yPos += 6;
          doc.text(`• Expected Energy Reduction: 70%+ vs conventional lighting`, 25, yPos);
          yPos += 6;
          doc.text(`• Estimated Cost: €${costs.led.toLocaleString()}`, 25, yPos);

          // === PAGE 3: FINANCIAL ANALYSIS ===
          doc.addPage();
          
          doc.setFontSize(16);
          doc.setFont(undefined, 'bold');
          doc.text("4. COMPREHENSIVE FINANCIAL ANALYSIS", 14, 20);
          
          yPos = 35;
          
          // Project Costs Breakdown
          doc.setFontSize(14);
          doc.text("4.1 Project Investment Breakdown", 20, yPos);
          yPos += 12;
          
          doc.setFontSize(11);
          doc.setFont(undefined, 'normal');
          doc.text(`Solar PV System (${solarSize} kW): €${costs.solar.toLocaleString()}`, 25, yPos);
          yPos += 7;
          doc.text(`Heat Pump System (${heatPumpSize} kW): €${costs.heatPump.toLocaleString()}`, 25, yPos);
          yPos += 7;
          doc.text(`Building Insulation (${insulationArea} m²): €${costs.insulation.toLocaleString()}`, 25, yPos);
          yPos += 7;
          doc.text(`High-Performance Windows: €${costs.windows.toLocaleString()}`, 25, yPos);
          yPos += 7;
          doc.text(`LED Lighting System: €${costs.led.toLocaleString()}`, 25, yPos);
          yPos += 7;
          doc.text(`Smart Building Controls: €${costs.smartControls.toLocaleString()}`, 25, yPos);
          yPos += 7;
          doc.text(`Professional Installation & Commissioning: €${costs.installation.toLocaleString()}`, 25, yPos);
          yPos += 10;
          
          doc.setFont(undefined, 'bold');
          doc.text(`TOTAL PROJECT INVESTMENT: €${totalCost.toLocaleString()}`, 25, yPos);
          yPos += 15;
          
          // Grant Funding Analysis
          doc.setFontSize(14);
          doc.text("4.2 APVA Grant Funding", 20, yPos);
          yPos += 12;
          
          doc.setFontSize(11);
          doc.setFont(undefined, 'normal');
          doc.text(`Maximum APVA Grant (70% of eligible costs): €${grantAmount.toLocaleString()}`, 25, yPos);
          yPos += 7;
          doc.text(`Client Investment Required: €${clientContribution.toLocaleString()}`, 25, yPos);
          yPos += 7;
          doc.text(`Grant Coverage Percentage: ${Math.round((grantAmount/totalCost)*100)}%`, 25, yPos);
          yPos += 15;
          
          // Return on Investment
          doc.setFontSize(14);
          doc.setFont(undefined, 'bold');
          doc.text("4.3 Return on Investment Analysis", 20, yPos);
          yPos += 12;
          
          doc.setFontSize(11);
          doc.setFont(undefined, 'normal');
          doc.text(`Current Annual Energy Costs: €${data.currentEnergyCost.toLocaleString()}`, 25, yPos);
          yPos += 7;
          doc.text(`Expected Energy Savings: ${expectedSavings}%`, 25, yPos);
          yPos += 7;
          doc.text(`Annual Cost Savings: €${annualSavings.toLocaleString()}`, 25, yPos);
          yPos += 7;
          doc.text(`Simple Payback Period: ${paybackPeriod} years`, 25, yPos);
          yPos += 7;
          doc.text(`25-Year Net Benefit: €${Math.round(annualSavings * 25 - clientContribution).toLocaleString()}`, 25, yPos);
          yPos += 7;
          doc.text(`Internal Rate of Return (IRR): ${Math.round((annualSavings/clientContribution)*100)}%`, 25, yPos);
          yPos += 15;
          
          // Environmental Impact
          doc.setFontSize(14);
          doc.setFont(undefined, 'bold');
          doc.text("4.4 Environmental Impact Assessment", 20, yPos);
          yPos += 12;
          
          doc.setFontSize(11);
          doc.setFont(undefined, 'normal');
          doc.text(`Annual CO₂ Emissions Reduction: ${co2Reduction.toLocaleString()} kg`, 25, yPos);
          yPos += 7;
          doc.text(`25-Year CO₂ Reduction: ${Math.round(co2Reduction * 25 / 1000)} tonnes`, 25, yPos);
          yPos += 7;
          doc.text(`Renewable Energy Generation: ${Math.round(solarSize * 1200).toLocaleString()} kWh/year`, 25, yPos);
          yPos += 7;
          doc.text(`Equivalent Trees Planted: ${Math.round(co2Reduction / 22)} trees/year`, 25, yPos);

          // === PAGE 4: TECHNICAL SPECIFICATIONS ===
          doc.addPage();
          
          doc.setFontSize(16);
          doc.setFont(undefined, 'bold');
          doc.text("5. TECHNICAL SPECIFICATIONS & COMPLIANCE", 14, 20);
          
          yPos = 35;
          
          // Equipment Standards
          doc.setFontSize(14);
          doc.text("5.1 Equipment Standards & Certifications", 20, yPos);
          yPos += 12;
          
          doc.setFontSize(11);
          doc.setFont(undefined, 'normal');
          doc.text("• All equipment meets or exceeds APVA eligibility criteria", 25, yPos);
          yPos += 6;
          doc.text("• Solar panels: IEC 61215 & IEC 61730 certified, 25-year performance warranty", 25, yPos);
          yPos += 6;
          doc.text("• Heat pump: EN 14511 tested, EHPA certified, A+++ energy label", 25, yPos);
          yPos += 6;
          doc.text("• Insulation materials: CE marked, BBA/NSAI approved", 25, yPos);
          yPos += 6;
          doc.text("• Windows: CE marked, BFRC rated, Passive House certified", 25, yPos);
          yPos += 6;
          doc.text("• LED lighting: LM-80 tested, ENERGY STAR qualified", 25, yPos);
          yPos += 15;
          
          // Installation Standards
          doc.setFontSize(14);
          doc.setFont(undefined, 'bold');
          doc.text("5.2 Installation & Commissioning Standards", 20, yPos);
          yPos += 12;
          
          doc.setFontSize(11);
          doc.setFont(undefined, 'normal');
          doc.text("• Installation by SEAI registered contractors", 25, yPos);
          yPos += 6;
          doc.text("• Compliance with IS EN 62446 (Solar PV)", 25, yPos);
          yPos += 6;
          doc.text("• Compliance with IS EN 378 (Heat Pump Systems)", 25, yPos);
          yPos += 6;
          doc.text("• Building regulations compliance certification", 25, yPos);
          yPos += 6;
          doc.text("• Full system commissioning and performance verification", 25, yPos);
          yPos += 6;
          doc.text("• Comprehensive O&M documentation provided", 25, yPos);
          yPos += 15;
          
          // Project Timeline
          doc.setFontSize(14);
          doc.setFont(undefined, 'bold');
          doc.text("5.3 Project Implementation Timeline", 20, yPos);
          yPos += 12;
          
          doc.setFontSize(11);
          doc.setFont(undefined, 'normal');
          doc.text("Phase 1: Design & Planning (4-6 weeks)", 25, yPos);
          yPos += 6;
          doc.text("Phase 2: Procurement & Permits (2-3 weeks)", 25, yPos);
          yPos += 6;
          doc.text("Phase 3: Installation & Commissioning (6-8 weeks)", 25, yPos);
          yPos += 6;
          doc.text("Phase 4: Testing & Handover (1-2 weeks)", 25, yPos);
          yPos += 6;
          doc.text("Total Project Duration: 13-19 weeks", 25, yPos);
          yPos += 15;
          
          // Quality Assurance
          doc.setFontSize(14);
          doc.setFont(undefined, 'bold');
          doc.text("5.4 Quality Assurance & Warranties", 20, yPos);
          yPos += 12;
          
          doc.setFontSize(11);
          doc.setFont(undefined, 'normal');
          doc.text("• 25-year performance warranty on solar panels", 25, yPos);
          yPos += 6;
          doc.text("• 10-year manufacturer warranty on inverters", 25, yPos);
          yPos += 6;
          doc.text("• 7-year warranty on heat pump systems", 25, yPos);
          yPos += 6;
          doc.text("• 10-year warranty on insulation materials", 25, yPos);
          yPos += 6;
          doc.text("• 5-year warranty on windows and doors", 25, yPos);
          yPos += 6;
          doc.text("• 3-year warranty on LED lighting systems", 25, yPos);
          yPos += 6;
          doc.text("• 2-year comprehensive system warranty", 25, yPos);

          // === PAGE 5: DECLARATIONS & SIGNATURES ===
          doc.addPage();
          
          doc.setFontSize(16);
          doc.setFont(undefined, 'bold');
          doc.text("6. DECLARATIONS & PROFESSIONAL CERTIFICATION", 14, 20);
          
          yPos = 35;
          
          // Applicant Declarations
          doc.setFontSize(14);
          doc.text("6.1 Applicant Declarations", 20, yPos);
          yPos += 12;
          
          doc.setFontSize(11);
          doc.setFont(undefined, 'normal');
          doc.text("I/We hereby declare that:", 25, yPos);
          yPos += 10;
          doc.text("• The information provided in this application is true, accurate and complete", 30, yPos);
          yPos += 6;
          doc.text("• The proposed equipment meets all APVA eligibility criteria", 30, yPos);
          yPos += 6;
          doc.text("• The equipment will be used wholly for business/commercial purposes", 30, yPos);
          yPos += 6;
          doc.text("• We understand and accept the terms and conditions of the APVA scheme", 30, yPos);
          yPos += 6;
          doc.text("• We commit to maintaining the equipment for the required period", 30, yPos);
          yPos += 6;
          doc.text("• We authorize Revenue to verify the information provided", 30, yPos);
          yPos += 20;
          
          doc.text("Applicant Signature: _________________________________ Date: _______________", 25, yPos);
          yPos += 12;
          doc.text(`Print Name: ${data.contactPerson}`, 25, yPos);
          yPos += 8;
          doc.text(`Position: _________________________________ Company: ${data.companyName}`, 25, yPos);
          yPos += 25;
          
          // Professional Certification
          doc.setFontSize(14);
          doc.setFont(undefined, 'bold');
          doc.text("6.2 Professional Energy Advisor Certification", 20, yPos);
          yPos += 12;
          
          // Professional certification box
          doc.setDrawColor(26, 54, 93);
          doc.setLineWidth(2);
          doc.rect(20, yPos, 170, 60);
          
          doc.setFontSize(11);
          doc.setFont(undefined, 'normal');
          yPos += 10;
          doc.text("This APVA application has been professionally prepared and reviewed by:", 25, yPos);
          yPos += 12;
          doc.setFont(undefined, 'bold');
          doc.setFontSize(13);
          doc.text("WAQAR LUND", 25, yPos);
          yPos += 8;
          doc.setFontSize(11);
          doc.text("Founder & Chief Executive Officer", 25, yPos);
          yPos += 6;
          doc.setFont(undefined, 'normal');
          doc.text("EcoRetrofit24 Limited", 25, yPos);
          yPos += 6;
          doc.text("Professional Energy Retrofit Consultancy", 25, yPos);
          yPos += 6;
          doc.text("Email: tebaiwaqar@gmail.com", 25, yPos);
          yPos += 6;
          doc.text("Phone: +923002096549", 25, yPos);
          yPos += 6;
          doc.text("SEAI Registered • Revenue Approved Advisor", 25, yPos);
          yPos += 15;
          
          doc.text("Professional Advisor Signature: _________________________ Date: _______________", 25, yPos);
          yPos += 20;
          
          // Project Notes
          if (data.projectNotes) {
            doc.setFontSize(14);
            doc.setFont(undefined, 'bold');
            doc.text("6.3 Additional Project Notes", 20, yPos);
            yPos += 12;
            
            doc.setFontSize(10);
            doc.setFont(undefined, 'normal');
            const notes = doc.splitTextToSize(data.projectNotes, 170);
            doc.text(notes, 25, yPos);
          }

          // Footer on all pages
          const pageCount = doc.internal.getNumberOfPages();
          for (let i = 1; i <= pageCount; i++) {
            doc.setPage(i);
            doc.setFontSize(8);
            doc.setTextColor(100, 100, 100);
            doc.text(`APVA Application ${appRef} - Page ${i} of ${pageCount}`, 105, 285, { align: 'center' });
            doc.text("Generated by EcoRetrofit24 Professional Portal - Certified Energy Retrofit Specialists", 105, 290, { align: 'center' });
          }

          // Save the PDF
          const fileName = `APVA-Application-${data.companyName.replace(/[^a-zA-Z0-9]/g, '')}-${new Date().toISOString().slice(0,10)}.pdf`;
          doc.save(fileName);
          
          setShowSuccess(true);
          setTimeout(() => setShowSuccess(false), 8000);
          
        } catch (error) {
          console.error('PDF generation error:', error);
          alert('⚠️ PDF Generation Error\n\nThere was an issue creating your APVA application. Please try again or contact support.');
        } finally {
          setIsGenerating(false);
        }
      };

      return (
        <div className="apva-container">
          {/* Header */}
          <div className="apva-header">
            <h1>Professional APVA Generator</h1>
            <p>Generate comprehensive, Revenue-compliant APVA grant applications with professional financial analysis</p>
            <div className="stats">
              <div className="stat">
                <div className="stat-value">€2.1M+</div>
                <div className="stat-label">Grants Secured</div>
              </div>
              <div className="stat">
                <div className="stat-value">89%</div>
                <div className="stat-label">Success Rate</div>
              </div>
              <div className="stat">
                <div className="stat-value">156</div>
                <div className="stat-label">Happy Clients</div>
              </div>
            </div>
          </div>

          {/* Main Form */}
          <div className="form-container">
            <div className="card">
              <div className="card-title">APVA Application Form</div>
              <div className="card-subtitle">Complete the form below to generate your professional APVA grant application</div>

              {/* Company Information */}
              <div className="form-section">
                <div className="form-section-title">Company Information</div>
                <div className="form-grid">
                  <div className="form-group">
                    <label className="label">Company Name *</label>
                    <input
                      type="text"
                      className="input"
                      placeholder="e.g. TechCorp Limited"
                      value={formData.companyName}
                      onChange={(e) => handleInputChange('companyName', e.target.value)}
                    />
                  </div>
                  <div className="form-group">
                    <label className="label">Tax Reference Number</label>
                    <input
                      type="text"
                      className="input"
                      placeholder="e.g. 1234567T"
                      value={formData.taxReference}
                      onChange={(e) => handleInputChange('taxReference', e.target.value)}
                    />
                  </div>
                  <div className="form-group">
                    <label className="label">Contact Person</label>
                    <input
                      type="text"
                      className="input"
                      placeholder="e.g. John Smith"
                      value={formData.contactPerson}
                      onChange={(e) => handleInputChange('contactPerson', e.target.value)}
                    />
                  </div>
                  <div className="form-group">
                    <label className="label">Email Address</label>
                    <input
                      type="email"
                      className="input"
                      placeholder="e.g. john@company.com"
                      value={formData.email}
                      onChange={(e) => handleInputChange('email', e.target.value)}
                    />
                  </div>
                  <div className="form-group">
                    <label className="label">Phone Number</label>
                    <input
                      type="tel"
                      className="input"
                      placeholder="e.g. +353 1 234 5678"
                      value={formData.phone}
                      onChange={(e) => handleInputChange('phone', e.target.value)}
                    />
                  </div>
                  <div className="form-group">
                    <label className="label">Business Address</label>
                    <input
                      type="text"
                      className="input"
                      placeholder="e.g. 123 Business Street, Dublin"
                      value={formData.address}
                      onChange={(e) => handleInputChange('address', e.target.value)}
                    />
                  </div>
                </div>
              </div>

              {/* Building Information */}
              <div className="form-section">
                <div className="form-section-title">Building Information</div>
                <div className="form-grid">
                  <div className="form-group">
                    <label className="label">Building Type</label>
                    <select
                      className="input select"
                      value={formData.buildingType}
                      onChange={(e) => handleInputChange('buildingType', e.target.value)}
                    >
                      <option value="">Select Building Type</option>
                      <option value="Commercial Office Building">Commercial Office Building</option>
                      <option value="Retail/Shopping Centre">Retail/Shopping Centre</option>
                      <option value="Industrial Facility">Industrial Facility</option>
                      <option value="Warehouse/Distribution">Warehouse/Distribution</option>
                      <option value="Hotel/Hospitality">Hotel/Hospitality</option>
                      <option value="Healthcare Facility">Healthcare Facility</option>
                      <option value="Educational Building">Educational Building</option>
                      <option value="Mixed Use Development">Mixed Use Development</option>
                    </select>
                  </div>
                  <div className="form-group">
                    <label className="label">Floor Area (m²)</label>
                    <input
                      type="number"
                      className="input"
                      placeholder="e.g. 300"
                      value={formData.floorArea}
                      onChange={(e) => handleInputChange('floorArea', e.target.value)}
                    />
                  </div>
                  <div className="form-group">
                    <label className="label">Year Built</label>
                    <input
                      type="number"
                      className="input"
                      placeholder="e.g. 2010"
                      min="1900"
                      max="2024"
                      value={formData.yearBuilt}
                      onChange={(e) => handleInputChange('yearBuilt', e.target.value)}
                    />
                  </div>
                  <div className="form-group">
                    <label className="label">Number of Floors</label>
                    <select
                      className="input select"
                      value={formData.floors}
                      onChange={(e) => handleInputChange('floors', e.target.value)}
                    >
                      <option value="">Select Floors</option>
                      <option value="1">1 Floor</option>
                      <option value="2">2 Floors</option>
                      <option value="3">3 Floors</option>
                      <option value="4">4 Floors</option>
                      <option value="5+">5+ Floors</option>
                    </select>
                  </div>
                  <div className="form-group">
                    <label className="label">Current BER Rating</label>
                    <select
                      className="input select"
                      value={formData.berRating}
                      onChange={(e) => handleInputChange('berRating', e.target.value)}
                    >
                      <option value="">Select BER Rating</option>
                      <option value="A1">A1 (Best)</option>
                      <option value="A2">A2</option>
                      <option value="A3">A3</option>
                      <option value="B1">B1</option>
                      <option value="B2">B2</option>
                      <option value="B3">B3</option>
                      <option value="C1">C1</option>
                      <option value="C2">C2</option>
                      <option value="C3">C3</option>
                      <option value="D1">D1</option>
                      <option value="D2">D2</option>
                      <option value="E1">E1</option>
                      <option value="E2">E2</option>
                      <option value="F">F</option>
                      <option value="G">G (Worst)</option>
                    </select>
                  </div>
                  <div className="form-group">
                    <label className="label">Primary Heating</label>
                    <select
                      className="input select"
                      value={formData.heatingType}
                      onChange={(e) => handleInputChange('heatingType', e.target.value)}
                    >
                      <option value="">Select Heating Type</option>
                      <option value="Natural Gas">Natural Gas</option>
                      <option value="Oil">Oil</option>
                      <option value="Electric">Electric</option>
                      <option value="Heat Pump">Heat Pump</option>
                      <option value="District Heating">District Heating</option>
                      <option value="Biomass">Biomass</option>
                    </select>
                  </div>
                </div>
              </div>

              {/* Energy Data */}
              <div className="form-section">
                <div className="form-section-title">Energy Consumption Data</div>
                <div className="form-grid">
                  <div className="form-group">
                    <label className="label">Annual kWh Usage</label>
                    <input
                      type="number"
                      className="input"
                      placeholder="e.g. 25000"
                      value={formData.annualKwh}
                      onChange={(e) => handleInputChange('annualKwh', e.target.value)}
                    />
                  </div>
                  <div className="form-group">
                    <label className="label">Current Annual Energy Cost (€)</label>
                    <input
                      type="number"
                      className="input"
                      placeholder="e.g. 8000"
                      value={formData.currentEnergyCost}
                      onChange={(e) => handleInputChange('currentEnergyCost', e.target.value)}
                    />
                  </div>
                </div>
              </div>

              {/* Energy Efficiency Measures */}
              <div className="form-section">
                <div className="form-section-title">Proposed Energy Efficiency Measures</div>
                <div className="form-group full-width">
                  <label className="label">Select the measures you want to include (optional - all measures included by default):</label>
                  <div className="checkbox-group">
                    <div className="checkbox-item">
                      <input
                        type="checkbox"
                        checked={formData.measures.solar}
                        onChange={(e) => handleMeasureChange('solar', e.target.checked)}
                      />
                      <span>Solar PV System</span>
                    </div>
                    <div className="checkbox-item">
                      <input
                        type="checkbox"
                        checked={formData.measures.heatPump}
                        onChange={(e) => handleMeasureChange('heatPump', e.target.checked)}
                      />
                      <span>Heat Pump System</span>
                    </div>
                    <div className="checkbox-item">
                      <input
                        type="checkbox"
                        checked={formData.measures.insulation}
                        onChange={(e) => handleMeasureChange('insulation', e.target.checked)}
                      />
                      <span>Building Insulation</span>
                    </div>
                    <div className="checkbox-item">
                      <input
                        type="checkbox"
                        checked={formData.measures.windows}
                        onChange={(e) => handleMeasureChange('windows', e.target.checked)}
                      />
                      <span>High-Performance Windows</span>
                    </div>
                    <div className="checkbox-item">
                      <input
                        type="checkbox"
                        checked={formData.measures.led}
                        onChange={(e) => handleMeasureChange('led', e.target.checked)}
                      />
                      <span>LED Lighting System</span>
                    </div>
                    <div className="checkbox-item">
                      <input
                        type="checkbox"
                        checked={formData.measures.smartControls}
                        onChange={(e) => handleMeasureChange('smartControls', e.target.checked)}
                      />
                      <span>Smart Building Controls</span>
                    </div>
                  </div>
                </div>
              </div>

              {/* Project Notes */}
              <div className="form-section">
                <div className="form-group full-width">
                  <label className="label">Additional Project Notes (Optional)</label>
                  <textarea
                    className="input textarea"
                    placeholder="Any specific requirements, constraints, or additional information about your project..."
                    value={formData.projectNotes}
                    onChange={(e) => handleInputChange('projectNotes', e.target.value)}
                  />
                </div>
              </div>

              {/* Generate Button */}
              <button 
                className="btn btn-primary"
                onClick={generateProfessionalAPVA}
                disabled={isGenerating}
              >
                {isGenerating ? (
                  <>
                    <span>🔄</span>
                    Generating Professional APVA Application...
                  </>
                ) : (
                  <>
                    <span>📄</span>
                    Generate Professional APVA Application PDF
                  </>
                )}
              </button>

              {/* Success Message */}
              {showSuccess && (
                <div className="success-banner">
                  <h3>✅ Professional APVA Application Generated Successfully!</h3>
                  <p>Your comprehensive, Revenue-compliant APVA grant application has been created and downloaded. The PDF includes complete financial analysis, technical specifications, and professional certification ready for submission.</p>
                </div>
              )}
            </div>

            {/* Information Panel */}
            <div className="card">
              <div className="card-title">What You'll Receive</div>
              <div className="card-subtitle">Professional APVA application package</div>

              <div className="info-item">
                <div className="info-icon">📋</div>
                <div className="info-content">
                  <h4>Revenue-Compliant Forms</h4>
                  <p>Complete APVA application forms meeting all Revenue Commissioners requirements</p>
                </div>
              </div>

              <div className="info-item">
                <div className="info-icon">💰</div>
                <div className="info-content">
                  <h4>Comprehensive Financial Analysis</h4>
                  <p>Detailed cost breakdowns, ROI calculations, payback analysis, and grant projections</p>
                </div>
              </div>

              <div className="info-item">
                <div className="info-icon">🔧</div>
                <div className="info-content">
                  <h4>Technical Specifications</h4>
                  <p>Professional equipment specs, installation standards, and compliance certifications</p>
                </div>
              </div>

              <div className="info-item">
                <div className="info-icon">🌱</div>
                <div className="info-content">
                  <h4>Environmental Impact Assessment</h4>
                  <p>CO₂ reduction calculations, renewable energy generation, and sustainability metrics</p>
                </div>
              </div>

              <div className="info-item">
                <div className="info-icon">✅</div>
                <div className="info-content">
                  <h4>Professional Certification</h4>
                  <p>EcoRetrofit24 professional review, certification, and advisory support included</p>
                </div>
              </div>

              <div className="info-item">
                <div className="info-icon">📤</div>
                <div className="info-content">
                  <h4>Submission-Ready Package</h4>
                  <p>Complete 5-page professional document ready for Revenue Commissioners submission</p>
                </div>
              </div>

              <div style={{
                marginTop: '24px',
                padding: '16px',
                background: 'linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)',
                border: '2px solid #22c55e',
                borderRadius: '8px',
                textAlign: 'center'
              }}>
                <div style={{ fontSize: '14px', fontWeight: '600', color: '#166534', marginBottom: '4px' }}>
                  💡 Quick Start Guide
                </div>
                <div style={{ fontSize: '13px', color: '#065f46', lineHeight: '1.4' }}>
                  1. Fill in your company and building details<br/>
                  2. Click generate to create your professional PDF<br/>
                  3. Review and complete any missing information<br/>
                  4. Submit to Revenue Commissioners<br/>
                  5. Receive up to 70% grant funding!
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    }

    function EcoRetrofit24Platform() {
      const [activeSection, setActiveSection] = useState('dashboard');
      const [mobileNavOpen, setMobileNavOpen] = useState(false);

      const toggleMobileNav = () => {
        setMobileNavOpen(!mobileNavOpen);
      };

      const handleNavClick = (section) => {
        setActiveSection(section);
        setMobileNavOpen(false);
      };

      const renderSection = () => {
        switch(activeSection) {
          case 'dashboard':
            return (
              <div className="section active" id="dashboard">
                <div className="section-header">
                  <h2>📊 Portfolio Dashboard</h2>
                  <p>Real-time overview of your energy retrofit portfolio performance and key metrics</p>
                </div>
                <div className="dashboard-grid">
                  <div className="card">
                    <div className="card-header">
                      <div className="card-icon">💰</div>
                      <div className="card-title">Total Portfolio Value</div>
                    </div>
                    <div className="card-value">€2.4M</div>
                    <div className="card-subtitle">+18% from last quarter</div>
                  </div>
                  <div className="card">
                    <div className="card-header">
                      <div className="card-icon">🏗️</div>
                      <div className="card-title">Active Projects</div>
                    </div>
                    <div className="card-value">12</div>
                    <div className="card-subtitle">3 completing this month</div>
                  </div>
                  <div className="card">
                    <div className="card-header">
                      <div className="card-icon">⚡</div>
                      <div className="card-title">Energy Savings</div>
                    </div>
                    <div className="card-value">847 MWh</div>
                    <div className="card-subtitle">Annual reduction achieved</div>
                  </div>
                  <div className="card">
                    <div className="card-header">
                      <div className="card-icon">🌱</div>
                      <div className="card-title">CO₂ Reduction</div>
                    </div>
                    <div className="card-value">312 tonnes</div>
                    <div className="card-subtitle">Environmental impact</div>
                  </div>
                  <div className="card">
                    <div className="card-header">
                      <div className="card-icon">📈</div>
                      <div className="card-title">ROI Performance</div>
                    </div>
                    <div className="card-value">24.7%</div>
                    <div className="card-subtitle">Average portfolio return</div>
                  </div>
                  <div className="card">
                    <div className="card-header">
                      <div className="card-icon">🎯</div>
                      <div className="card-title">Grant Success Rate</div>
                    </div>
                    <div className="card-value">89%</div>
                    <div className="card-subtitle">Applications approved</div>
                  </div>
                </div>
              </div>
            );
          case 'projects':
            return (
              <div className="section active" id="projects">
                <div className="section-header">
                  <h2>🏗️ Project Management</h2>
                  <p>Comprehensive project pipeline and performance tracking</p>
                </div>
                <div className="projects-grid">
                  <div className="project-card">
                    <div className="project-header">
                      <div>
                        <div className="project-title">Dublin Office Complex</div>
                        <div className="project-location">Sandyford, Dublin 18</div>
                      </div>
                      <div className="project-status status-active">Active</div>
                    </div>
                    <div className="project-metrics">
                      <div className="metric">
                        <span className="metric-value">€340K</span>
                        <span className="metric-label">Investment</span>
                      </div>
                      <div className="metric">
                        <span className="metric-value">65%</span>
                        <span className="metric-label">Complete</span>
                      </div>
                    </div>
                  </div>
                  <div className="project-card">
                    <div className="project-header">
                      <div>
                        <div className="project-title">Cork Manufacturing Plant</div>
                        <div className="project-location">Little Island, Cork</div>
                      </div>
                      <div className="project-status status-planning">Planning</div>
                    </div>
                    <div className="project-metrics">
                      <div className="metric">
                        <span className="metric-value">€580K</span>
                        <span className="metric-label">Investment</span>
                      </div>
                      <div className="metric">
                        <span className="metric-value">15%</span>
                        <span className="metric-label">Complete</span>
                      </div>
                    </div>
                  </div>
                  <div className="project-card">
                    <div className="project-header">
                      <div>
                        <div className="project-title">Galway Retail Center</div>
                        <div className="project-location">Galway City Centre</div>
                      </div>
                      <div className="project-status status-completed">Completed</div>
                    </div>
                    <div className="project-metrics">
                      <div className="metric">
                        <span className="metric-value">€220K</span>
                        <span className="metric-label">Investment</span>
                      </div>
                      <div className="metric">
                        <span className="metric-value">100%</span>
                        <span className="metric-label">Complete</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            );
          case 'energy-audit':
            return (
              <div className="section active" id="energy-audit">
                <div className="section-header">
                  <h2>🔍 Energy Audit</h2>
                  <p>Comprehensive building energy assessment and optimization recommendations</p>
                </div>
                <div className="audit-grid">
                  <div className="audit-card">
                    <div className="audit-icon">🏢</div>
                    <h3>Building Assessment</h3>
                    <p>Complete thermal imaging and energy performance evaluation</p>
                    <div className="audit-metrics">
                      <div className="metric">
                        <span className="metric-value">15</span>
                        <span className="metric-label">Data Points</span>
                      </div>
                      <div className="metric">
                        <span className="metric-value">98%</span>
                        <span className="metric-label">Accuracy</span>
                      </div>
                    </div>
                  </div>
                  <div className="audit-card">
                    <div className="audit-icon">📊</div>
                    <h3>Performance Analysis</h3>
                    <p>Detailed energy consumption patterns and efficiency opportunities</p>
                    <div className="audit-metrics">
                      <div className="metric">
                        <span className="metric-value">24/7</span>
                        <span className="metric-label">Monitoring</span>
                      </div>
                      <div className="metric">
                        <span className="metric-value">45%</span>
                        <span className="metric-label">Avg Savings</span>
                      </div>
                    </div>
                  </div>
                  <div className="audit-card">
                    <div className="audit-icon">💡</div>
                    <h3>Optimization Plan</h3>
                    <p>Customized recommendations for maximum energy efficiency gains</p>
                    <div className="audit-metrics">
                      <div className="metric">
                        <span className="metric-value">ROI</span>
                        <span className="metric-label">3.2x Return</span>
                      </div>
                      <div className="metric">
                        <span className="metric-value">2-4</span>
                        <span className="metric-label">Year Payback</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            );
          case 'apva-generator':
            return (
              <div className="section active" id="apva-generator">
                <div className="section-header">
                  <h2>📄 APVA Generator</h2>
                  <p>Generate professional Revenue-compliant APVA grant applications with comprehensive financial analysis</p>
                </div>
                <APVAGenerator />
              </div>
            );
          case 'clients':
            return (
              <div className="section active" id="clients">
                <div className="section-header">
                  <h2>👥 Client Portal</h2>
                  <p>Client relationship management and project collaboration hub</p>
                </div>
                <div className="card">
                  <div className="card-title">Client Management System</div>
                  <p>Comprehensive client portal with project tracking, document sharing, and communication tools.</p>
                </div>
              </div>
            );
          case 'documents':
            return (
              <div className="section active" id="documents">
                <div className="section-header">
                  <h2>📁 Document Management</h2>
                  <p>Centralized document storage and collaboration system</p>
                </div>
                <div className="card">
                  <div className="card-title">Document Library</div>
                  <p>Secure document storage with version control and team collaboration features.</p>
                </div>
              </div>
            );
          case 'reports':
            return (
              <div className="section active" id="reports">
                <div className="section-header">
                  <h2>📈 Analytics & Reports</h2>
                  <p>Comprehensive performance analytics and business intelligence</p>
                </div>
                <div className="card">
                  <div className="card-title">Performance Analytics</div>
                  <p>Advanced reporting and analytics dashboard for portfolio performance tracking.</p>
                </div>
              </div>
            );
          case 'ai-insights':
            return (
              <div className="section active" id="ai-insights">
                <div className="section-header">
                  <h2>🤖 AI-Powered Insights</h2>
                  <p>Machine learning-driven recommendations and predictive analytics</p>
                </div>
                <div className="card">
                  <div className="card-title">AI Recommendations</div>
                  <p>Intelligent insights and recommendations powered by advanced machine learning algorithms.</p>
                </div>
              </div>
            );
          default:
            return null;
        }
      };

      return (
        <div className="container">
          {/* Header */}
          <header className="header">
            <div className="header-content">
              <div className="logo">
                <div className="logo-icon">🌱</div>
                <div className="logo-text">
                  <h1>EcoRetrofit24</h1>
                  <p>Professional Portal</p>
                </div>
              </div>

              {/* Desktop Navigation */}
              <nav className="nav">
                <div 
                  className={`nav-item ${activeSection === 'dashboard' ? 'active' : ''}`} 
                  onClick={() => handleNavClick('dashboard')}
                >
                  <span className="nav-icon">📊</span>
                  Dashboard
                </div>
                <div 
                  className={`nav-item ${activeSection === 'projects' ? 'active' : ''}`} 
                  onClick={() => handleNavClick('projects')}
                >
                  <span className="nav-icon">🏗️</span>
                  Projects
                </div>
                <div 
                  className={`nav-item ${activeSection === 'energy-audit' ? 'active' : ''}`} 
                  onClick={() => handleNavClick('energy-audit')}
                >
                  <span className="nav-icon">🔍</span>
                  Energy Audit
                </div>
                <div 
                  className={`nav-item ${activeSection === 'apva-generator' ? 'active' : ''}`} 
                  onClick={() => handleNavClick('apva-generator')}
                >
                  <span className="nav-icon">📄</span>
                  APVA Generator
                </div>
                <div 
                  className={`nav-item ${activeSection === 'clients' ? 'active' : ''}`} 
                  onClick={() => handleNavClick('clients')}
                >
                  <span className="nav-icon">👥</span>
                  Clients
                </div>
                <div 
                  className={`nav-item ${activeSection === 'reports' ? 'active' : ''}`} 
                  onClick={() => handleNavClick('reports')}
                >
                  <span className="nav-icon">📈</span>
                  Reports
                </div>
              </nav>

              {/* Header Actions */}
              <div className="header-actions">
                <button className="mobile-nav-toggle" onClick={toggleMobileNav}>
                  ☰
                </button>
                <div className="user-profile">
                  <div className="user-avatar">WL</div>
                  <div className="user-info">
                    <div className="user-name">Waqar Lund</div>
                    <div className="user-role">CEO & Founder</div>
                  </div>
                </div>
              </div>
            </div>
          </header>

          {/* Mobile Navigation */}
          <nav className={`mobile-nav ${mobileNavOpen ? 'active' : ''}`}>
            <div 
              className={`nav-item ${activeSection === 'dashboard' ? 'active' : ''}`} 
              onClick={() => handleNavClick('dashboard')}
            >
              <span className="nav-icon">📊</span>
              Dashboard
            </div>
            <div 
              className={`nav-item ${activeSection === 'projects' ? 'active' : ''}`} 
              onClick={() => handleNavClick('projects')}
            >
              <span className="nav-icon">🏗️</span>
              Projects
            </div>
            <div 
              className={`nav-item ${activeSection === 'energy-audit' ? 'active' : ''}`} 
              onClick={() => handleNavClick('energy-audit')}
            >
              <span className="nav-icon">🔍</span>
              Energy Audit
            </div>
            <div 
              className={`nav-item ${activeSection === 'apva-generator' ? 'active' : ''}`} 
              onClick={() => handleNavClick('apva-generator')}
            >
              <span className="nav-icon">📄</span>
              APVA Generator
            </div>
            <div 
              className={`nav-item ${activeSection === 'clients' ? 'active' : ''}`} 
              onClick={() => handleNavClick('clients')}
            >
              <span className="nav-icon">👥</span>
              Clients
            </div>
            <div 
              className={`nav-item ${activeSection === 'documents' ? 'active' : ''}`} 
              onClick={() => handleNavClick('documents')}
            >
              <span className="nav-icon">📁</span>
              Documents
            </div>
            <div 
              className={`nav-item ${activeSection === 'reports' ? 'active' : ''}`} 
              onClick={() => handleNavClick('reports')}
            >
              <span className="nav-icon">📈</span>
              Reports
            </div>
            <div 
              className={`nav-item ${activeSection === 'ai-insights' ? 'active' : ''}`} 
              onClick={() => handleNavClick('ai-insights')}
            >
              <span className="nav-icon">🤖</span>
              AI Insights
            </div>
          </nav>

          {/* Main Content */}
          <main className="main-content">
            {renderSection()}
          </main>
        </div>
      );
    }

    ReactDOM.render(<EcoRetrofit24Platform />, document.getElementById('root'));
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97e6231cd0404b13',t:'MTc1Nzc1MDcwMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
